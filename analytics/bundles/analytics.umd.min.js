!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("rxjs/operators"),require("@acpaas-ui/ngx-components/utils")):"function"==typeof define&&define.amd?define("analytics",["exports","@angular/core","@angular/common","@angular/router","rxjs/operators","@acpaas-ui/ngx-components/utils"],t):t(e.analytics={},e.ng.core,e.ng.common,e.ng.router,e.rxjs.operators,null)}(this,function(e,r,t,i,n,o){"use strict";var a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},c=function(){function e(e,t,r,i){if(this.router=t,this.activatedRoute=r,this.windowService=i,!this.windowService.ga)throw new Error("GA is not defined, is analytics included?");this.autoTriggerPageView(e,t)}return e.prototype.setDimension=function(e,t){this.windowService.ga("set",e,t)},e.prototype.triggerPageView=function(e,t,r){this.windowService.ga("send","pageview",{title:e||this.windowService.document.title,location:t||this.windowService.location.href,page:r||this.windowService.location.pathname})},e.prototype.triggerEvent=function(e,t,r,i){if(!e)throw new Error("category is required");if(!t)throw new Error("action is required");return r?i?this.windowService.ga("send","event",e,t,r,i):this.windowService.ga("send","event",e,t,r):this.windowService.ga("send","event",e,t)},e.prototype.autoTriggerPageView=function(t,e){var r=this;e.events.pipe(n.filter(function(e){return e instanceof i.NavigationEnd}),n.map(function(){return r.findLastChild(r.activatedRoute)})).subscribe(function(e){e.data&&e.data.doNotTrack||r.triggerPageView(r.windowService.document.title,r.windowService.location.href,t.path())})},e.prototype.findLastChild=function(e){for(var t=e.snapshot.firstChild;null!==t.firstChild;)t=t.firstChild;return t},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:t.Location},{type:i.Router},{type:i.ActivatedRoute},{type:undefined,decorators:[{type:r.Inject,args:[o.WINDOW]}]}]},e}(),s=new r.InjectionToken("GTM_CONFIG"),u={PAGE_VIEW:{TRIGGER:"virtualPageView"},EVENT:{TRIGGER:"eventTrigger",CATEGORY:"eventCategory",ACTION:"eventAction",LABEL:"eventLabel",VALUE:"eventValue"}},d=function(){function e(e,t){this.windowService=e,this.config=t}return e.prototype.addToDataLayer=function(e){this.windowService.dataLayer.push(e)},e.prototype.trigger=function(e,t){void 0===t&&(t={});var r=a({},t,{event:e});this.addToDataLayer(r)},e.prototype.triggerPageView=function(e){void 0===e&&(e={}),this.trigger(this.config.PAGE_VIEW.TRIGGER,e)},e.prototype.triggerEvent=function(e,t,r,i){var n;this.trigger(this.config.EVENT.TRIGGER,((n={})[this.config.EVENT.CATEGORY]=e,n[this.config.EVENT.ACTION]=t,n[this.config.EVENT.LABEL]=r,n[this.config.EVENT.VALUE]=i,n))},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[o.WINDOW]}]},{type:undefined,decorators:[{type:r.Inject,args:[s]}]}]},e}(),g=[c,d],p=function(){function e(e,t){this.el=e,this.gaService=t}return e.prototype.onClick=function(e){var t=this.el.nativeElement;this.gaEvent?this.gaService.triggerEvent(t.tagName.toLowerCase(),"click",t.innerText,this.gaEvent):this.gaService.triggerEvent(t.tagName.toLowerCase(),"click",t.innerText)},e.decorators=[{type:r.Directive,args:[{selector:"[auiGaEvent]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:c}]},e.propDecorators={gaEvent:[{type:r.Input}],onClick:[{type:r.HostListener,args:["click",["$event"]]}]},e}(),f=[p],v=u,l=function(){function t(){}return t.forChild=function(e){return void 0===e&&(e={}),e=a({},u,e),{ngModule:t,providers:[{provide:s,useValue:e},g]}},t.decorators=[{type:r.NgModule,args:[{imports:[o.WindowModule],providers:[{provide:s,useValue:v},g],declarations:[f],exports:[f]}]}],t}();e.AnalyticsModule=l,e.GAService=c,e.GTMService=d,e.GaEventDirective=p,e.GTM_CONFIG=s,e.GTM_CONFIG_DEFAULT=u,e.ɵb=f,e.ɵa=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=analytics.umd.min.js.map