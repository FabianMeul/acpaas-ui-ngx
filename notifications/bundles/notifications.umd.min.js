!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@angular/core"),require("@acpaas-ui/js-notification-store"),require("@angular/router"),require("rxjs/operators"),require("@angular/common"),require("@acpaas-ui/ngx-components/utils")):"function"==typeof define&&define.amd?define("notifications",["exports","@angular/core","@acpaas-ui/js-notification-store","@angular/router","rxjs/operators","@angular/common","@acpaas-ui/ngx-components/utils"],i):i(t.notifications={},t.ng.core,null,t.ng.router,t.rxjs.operators,t.ng.common,null)}(this,function(t,n,o,e,a,r,s){"use strict";var c=function(){function t(){return new o.NotificationStore}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),u=new n.InjectionToken("initialMessages"),p=new n.InjectionToken("initialOptions"),i={},f={},l=function(){function e(t,i){this.messages=t,this.options=i,o.NotificationStore.messages=t,o.NotificationStore.options=i}return e.forRoot=function(t,i){return{ngModule:e,providers:[c,{provide:u,useValue:t},{provide:p,useValue:i}]}},e.decorators=[{type:n.NgModule,args:[{providers:[c,{provide:u,useValue:i},{provide:p,useValue:f}]}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[u]}]},{type:undefined,decorators:[{type:n.Inject,args:[p]}]}]},e}(),g=new n.InjectionToken("availableTypes"),h={I:{type:"info",icon:"fa fa-info",classList:"info"},E:{type:"error",icon:"fa fa-warning",classList:"error"},W:{type:"warning",icon:"fa fa-warning",classList:"warning"},S:{type:"success",icon:"fa fa-check",classList:"success"},N:{type:"notification",icon:"fa fa-bell-o",classList:"notification"}},d=function(){function t(i,t){var e=this;this.availableTypes=i,this.router=t,this.notifications=[],this.remainingMessage={singular:"%{remaining} more",plural:"%{remaining} more"},this.clearNotification=new n.EventEmitter,this.activeNotification=null,this.typeClasses={},this.iconMap={},this.replaceMap={remaining:0},Object.getOwnPropertyNames(i).forEach(function(t){e.typeClasses[t]=i[t].classList,e.iconMap[t]=i[t].icon})}return t.prototype.clearListeners=function(){this.notificationTimer&&clearTimeout(this.notificationTimer),this.scopeListener&&this.scopeListener.unsubscribe()},t.prototype.setListeners=function(){var i=this;this.activeNotification.timer&&(this.notificationTimer=setTimeout(this.onClearNotification.bind(this),this.activeNotification.timer)),"page"===this.activeNotification.scope&&(this.scopeListener=this.router.events.pipe(a.filter(function(t){return t instanceof e.NavigationStart})).subscribe(function(t){t.url!==i.router.url&&i.onClearNotification()}.bind(this)))},t.prototype.ngOnChanges=function(){this.clearListeners(),Array.isArray(this.notifications)&&this.notifications.length?(this.activeNotification=this.notifications.slice(-1)[0],this.replaceMap={remaining:this.notifications.length-1}):(this.activeNotification=null,this.replaceMap={remaining:0}),this.activeNotification&&this.setListeners()},t.prototype.onClearNotification=function(){this.clearNotification.emit(this.activeNotification)},t.decorators=[{type:n.Component,args:[{selector:"aui-statusbar",template:'<div class="o-statusbar" *ngIf="activeNotification" [ngClass]="typeClasses[activeNotification.type]">\n    <span class="o-statusbar__status" [ngClass]="iconMap[activeNotification.type]"></span>\n\n    <div class="o-statusbar__notification">\n        <p>\n            <span [innerHTML]="activeNotification.message"></span>\n            <span *ngIf="notifications.length > 1">(<span [innerHTML]="remainingMessage | pluralizeLabel:replaceMap.remaining | interpolateLabel:replaceMap"></span>)</span>\n        </p>\n    </div>\n\n    <button class="a-button has-icon" (click)="onClearNotification()">\n        <span class="fa fa-times"></span>\n    </button>\n</div>\n',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[g]}]},{type:e.Router}]},t.propDecorators={notifications:[{type:n.Input}],remainingMessage:[{type:n.Input}],clearNotification:[{type:n.Output}]},t}();function m(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),r=[];try{for(;(void 0===i||0<i--)&&!(n=a.next()).done;)r.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(e=a["return"])&&e.call(a)}finally{if(o)throw o.error}}return r}function y(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(m(arguments[i]));return t}var v=[d],N=h,b=function(){function i(){}return i.forChild=function(t){return{ngModule:i,providers:[{provide:g,useValue:t}]}},i.decorators=[{type:n.NgModule,args:[{imports:[r.CommonModule,e.RouterModule,s.LabelsModule],declarations:y(v),exports:y(v),providers:[{provide:g,useValue:N}]}]}],i}();t.NotificationsService=c,t.NOTIFICATIONS_INITIAL_MESSAGES=u,t.NOTIFICATIONS_INITIAL_OPTIONS=p,t.NotificationsModule=l,t.StatusbarComponent=d,t.STATUSBAR_AVAILABLE_TYPES=g,t.STATUSBAR_DEFAULT_TYPES=h,t.StatusbarModule=b,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=notifications.umd.min.js.map