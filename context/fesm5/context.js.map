{"version":3,"file":"context.js.map","sources":["ng://context/lib/context/context.conf.ts","ng://context/lib/context/services/context-writer.service.ts","ng://context/lib/context/services/context.service.ts","ng://context/lib/context/services/index.ts","ng://context/lib/context/utils/router.helper.ts","ng://context/lib/context/context.module.ts","ng://context/lib/context/store/context/context.actiontypes.ts","ng://context/lib/context/store/context/context.actioncreator.ts","ng://context/lib/context/store/context/context.reducer.ts","ng://context/lib/context/store/store.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nimport { ContextConfig } from './types/context.types';\n\nexport const CONTEXT_CONFIG: InjectionToken<ContextConfig> = new InjectionToken<ContextConfig>('contextConfig');\n\nexport const CONTEXT_CONFIG_DEFAULT: ContextConfig = {\n\tuseTitleSuffix: false,\n\textendTitle: false,\n\ttitleDelimiter: ' | ',\n\tdefaults: {},\n\trouterContext: true,\n};\n","import { Inject, Injectable } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { DOCUMENT } from '@angular/common';\n\nimport { CONTEXT_CONFIG, CONTEXT_CONFIG_DEFAULT } from '../context.conf';\nimport { ContextConfig } from '../types/context.types';\n\n@Injectable()\nexport class ContextWriterService {\n\tconstructor(\n\t\t@Inject(CONTEXT_CONFIG) private metaConfig: ContextConfig,\n\t\t@Inject(DOCUMENT) private document: any,\n\t\tprivate titleService: Title\n\t) {\n\t\tthis.metaConfig = {\n\t\t\t...CONTEXT_CONFIG_DEFAULT,\n\t\t\t...metaConfig,\n\t\t};\n\t}\n\n\tpublic updateMetaTags(meta: any = {}): void {\n\t\tif (meta.disableUpdate) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newConfig = {\n\t\t\t...meta,\n\t\t\t...this.metaConfig.defaults,\n\t\t\ttitle: this.getTitle(meta),\n\t\t};\n\n\t\tObject.keys(newConfig).forEach(key => {\n\t\t\tthis.setTag(key, newConfig);\n\t\t});\n\t}\n\n\tpublic setTag(key: string, values: { [key: string]: string } = {}): void {\n\t\tswitch (key) {\n\t\t\tcase 'title':\n\t\t\tcase 'titleSuffix':\n\t\t\t\treturn this.setTitle(values.title, values.titleSuffix);\n\t\t\tcase 'favIcon':\n\t\t\t\treturn this.setFavIcon(values.favIcon);\n\t\t\tdefault:\n\t\t\t\treturn this.setTagDefault(key, values[key]);\n\t\t}\n\t}\n\n\tprivate setTitle(title?: string, titleSuffix: string = this.metaConfig.defaults.titleSuffix): void {\n\t\tlet titleStr = this.isDefined(title) ? title : this.metaConfig.defaults.title;\n\n\t\tif (this.metaConfig.useTitleSuffix && this.isDefined(titleSuffix)) {\n\t\t\ttitleStr += titleSuffix;\n\t\t}\n\n\t\tthis.titleService.setTitle(titleStr);\n\t}\n\n\tprivate setFavIcon(favIcon: string): void {\n\t\tthis.updateFavIcon('apple-touch-icon', favIcon);\n\t\tthis.updateFavIcon('shortcut icon', favIcon);\n\t}\n\n\tprivate updateFavIcon(rel: string, href: string, attrs?: { [key: string]: string }): void {\n\t\tconst oldIcon: HTMLElement = this.document.querySelector(`link[rel=\"${rel}\"]`);\n\n\t\tif (oldIcon && oldIcon.getAttribute('href') === href) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newIcon: HTMLElement = this.document.createElement('link');\n\t\tnewIcon.setAttribute('rel', rel);\n\t\tnewIcon.setAttribute('href', href);\n\n\t\tif (attrs) {\n\t\t\tObject.keys(attrs).forEach((key: string) => {\n\t\t\t\tnewIcon.setAttribute(key, attrs[key]);\n\t\t\t});\n\t\t}\n\n\t\tif (oldIcon) {\n\t\t\tthis.document.head.removeChild(oldIcon);\n\t\t}\n\n\t\tthis.document.head.appendChild(newIcon);\n\t}\n\n\tprivate setTagDefault(tag: string, content: string): void {\n\t\tconst tagElement = this.getOrCreateMetaTag(tag);\n\t\tconst tagContent = this.isDefined(content) ? content : (this.metaConfig.defaults[tag] || '');\n\n\t\ttagElement.setAttribute('content', tagContent);\n\n\t\tif (tag === 'description') {\n\t\t\tconst ogDescElement = this.getOrCreateMetaTag('og:description');\n\t\t\togDescElement.setAttribute('content', tagContent);\n\t\t}\n\t}\n\n\tprivate isDefined(value: any): Boolean {\n\t\treturn typeof value !== 'undefined';\n\t}\n\n\tprivate getOrCreateMetaTag(name: string): HTMLElement {\n\t\tlet el: HTMLElement = this.document.querySelector(`meta[name='${name}']`);\n\t\tif (!el) {\n\t\t\tel = this.document.createElement('meta');\n\t\t\tel.setAttribute('name', name);\n\t\t\tthis.document.head.appendChild(el);\n\t\t}\n\t\treturn el;\n\t}\n\n\tprivate getTitle(meta: any = {}): string {\n\t\tconst shouldExtend = this.metaConfig.extendTitle && meta.parent;\n\n\t\treturn shouldExtend ? [meta.title, meta.parent].join(this.metaConfig.titleDelimiter) : meta.title;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nimport { Context } from '../types/context.types';\nimport { ContextWriterService } from './context-writer.service';\n\n@Injectable()\nexport class ContextService {\n\tpublic context$ = new BehaviorSubject<Context>(null);\n\n\tconstructor(\n\t\tprivate contextWriter: ContextWriterService\n\t) {}\n\n\tpublic updateContext(context: Context): void {\n\t\tthis.contextWriter.updateMetaTags(context);\n\t\tthis.context$.next(context);\n\t}\n}\n","import { ContextService } from './context.service';\nimport { ContextWriterService } from './context-writer.service';\n\nexport const Services = [\n\tContextService,\n\tContextWriterService,\n];\n","import { ActivatedRoute } from '@angular/router';\n\nexport class RouterHelper {\n\tpublic static getParentTitle(route, titles: string[] = []): string[] {\n\t\tif (!route) {\n\t\t\treturn titles;\n\t\t}\n\n\t\tconst title = this.verifyPath(route, 'parent.data.meta.title');\n\t\tconst newTitles = title ? titles.concat(title) : titles;\n\n\t\treturn route.parent ? this.getParentTitle(route.parent, newTitles) : newTitles;\n\t}\n\n\tpublic static verifyPath(data: any, path: string): any {\n\t\tlet curr = data;\n\t\tconst namespace = path.split('.');\n\n\t\tfor (let i = 0; i < namespace.length; i += 1) {\n\t\t\tif (!!curr[namespace[i]]) { // can't use hasOwnProperty so we'll cast to Boolean\n\t\t\t\tcurr = curr[namespace[i]];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn curr;\n\t}\n\n\tpublic static findLastChild(activatedRoute: ActivatedRoute): any {\n\t\tconst snapshot = activatedRoute.snapshot;\n\n\t\tlet child = snapshot.firstChild;\n\t\twhile (child.firstChild !== null) {\n\t\t\tchild = child.firstChild;\n\t\t}\n\n\t\treturn child;\n\t}\n}\n","import { NgModule, ModuleWithProviders, Inject } from '@angular/core';\nimport {\n\tRouterModule,\n\tRouter,\n\tNavigationEnd,\n\tActivatedRoute\n} from '@angular/router';\nimport { filter, map } from 'rxjs/operators';\n\nimport { Services } from './services/index';\n\nimport { CONTEXT_CONFIG, CONTEXT_CONFIG_DEFAULT } from './context.conf';\nimport { ContextService } from './services/context.service';\nimport { ContextConfig } from './types/context.types';\nimport { RouterHelper } from './utils/router.helper';\n\n@NgModule({\n\timports: [\n\t\tRouterModule,\n\t],\n\tproviders: [\n\t\tServices,\n\t\t{ provide: CONTEXT_CONFIG, useValue: CONTEXT_CONFIG_DEFAULT },\n\t],\n})\nexport class ContextModule {\n\tstatic forRoot(metaConfig: ContextConfig): ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: ContextModule,\n\t\t\tproviders: [\n\t\t\t\t{ provide: CONTEXT_CONFIG, useValue: metaConfig },\n\t\t\t\t...Services,\n\t\t\t],\n\t\t};\n\t}\n\n\tconstructor(\n\t\tprivate contextService: ContextService,\n\t\tprivate router: Router,\n\t\tprivate activatedRoute: ActivatedRoute,\n\t\t@Inject(CONTEXT_CONFIG) private contextConfig: ContextConfig\n\t) {\n\t\tif (!contextConfig.routerContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.router.events\n\t\t\t.pipe(\n\t\t\t\tfilter(event => (event instanceof NavigationEnd)),\n\t\t\t\tmap(() => RouterHelper.findLastChild(this.activatedRoute))\n\t\t\t)\n\t\t\t.subscribe((route: any) => {\n\t\t\t\troute.data = route.data || {};\n\t\t\t\troute.data.meta = route.data.meta || {};\n\t\t\t\troute.data.meta.parent = RouterHelper.getParentTitle(route);\n\n\t\t\t\tthis.contextService.updateContext(route.data.meta);\n\t\t\t});\n\t}\n}\n","export const CONTEXT_LOAD = 'CONTEXT_LOAD';\n","import { Injectable } from '@angular/core';\nimport { NgRedux } from '@angular-redux/store';\nimport { Subscription } from 'rxjs/Subscription';\nimport { Observable } from 'rxjs/Observable';\n\nimport { Context } from '../../types/context.types';\nimport { ContextState } from '../store.types';\nimport { CONTEXT_LOAD } from './context.actiontypes';\nimport { ContextService } from '../../services/context.service';\nimport { ContextWriterService } from '../../services/context-writer.service';\n\n@Injectable()\nexport class ContextActionCreator {\n\tprivate storeSubscription: Subscription;\n\tprivate onStoreLoaded: Function;\n\n\tconstructor(\n\t\tprivate contextService: ContextService,\n\t\tprivate contextWriter: ContextWriterService,\n\t\tprivate ngRedux: NgRedux<ContextState>\n\t) {\n\t\tcontextService.context$.subscribe(context => this.loadContext(context, true));\n\t}\n\n\tloadContext(context: Context, fromRoute?: Boolean) {\n\t\tif (!this.ngRedux['_store']) {\n\t\t\treturn this.subscribeToStore(() => this.loadContext(context, fromRoute));\n\t\t}\n\n\t\tthis.ngRedux.dispatch({\n\t\t\ttype: CONTEXT_LOAD,\n\t\t\tcontext,\n\t\t});\n\n\t\tif (!fromRoute) {\n\t\t\tthis.contextWriter.updateMetaTags(context);\n\t\t}\n\t}\n\n\tprivate subscribeToStore(cb) {\n\t\tthis.onStoreLoaded = cb;\n\n\t\tif (this.storeSubscription) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.storeSubscription = (this.ngRedux['_store$'] as Observable<any>)\n\t\t\t.subscribe((store => {\n\t\t\t\tif (store) {\n\t\t\t\t\tthis.storeSubscription.unsubscribe();\n\n\t\t\t\t\tthis.onStoreLoaded();\n\t\t\t\t}\n\t\t\t}).bind(this));\n\t}\n}\n","import { Context } from '../../types/context.types';\nimport { CONTEXT_LOAD } from './context.actiontypes';\n\nexport const contextReducer = (\n\tstate: Context = null,\n\taction\n): Context => {\n\tswitch (action.type) {\n\t\tcase CONTEXT_LOAD:\n\t\t\treturn { ...action.context };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { NgModule } from '@angular/core';\nimport { NgReduxModule } from '@angular-redux/store';\n\nimport { ContextActionCreator } from './context/context.actioncreator';\n\n@NgModule({\n\timports: [\n\t\tNgReduxModule,\n\t],\n\tproviders: [\n\t\tContextActionCreator,\n\t],\n})\nexport class ContextStoreModule {\n\tconstructor(\n\t\tcontextActions: ContextActionCreator // make sure the actioncreator is subscribed to the service\n\t) {}\n}\n"],"names":[],"mappings":"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"}
