!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("leaflet"),require("esri-leaflet"),require("leaflet-draw"),require("@angular/forms"),require("@angular/common"),require("@acpaas-ui/ngx-components/flyout"),require("leaflet/dist/leaflet.css"),require("leaflet-draw/dist/leaflet.draw.css")):"function"==typeof define&&define.amd?define("map",["exports","@angular/core","leaflet","esri-leaflet","leaflet-draw","@angular/forms","@angular/common","@acpaas-ui/ngx-components/flyout","leaflet/dist/leaflet.css","leaflet-draw/dist/leaflet.draw.css"],e):e(t.map={},t.ng.core,null,null,null,t.ng.forms,t.ng.common,null)}(this,function(t,o,a,n,e,i,l,r){"use strict";var s=function(){function t(t){var e=this;this.options=t,this.initialized=!1,this.locating=!1,this.fullScreen=!1,this.onInit=new o.EventEmitter,this.modes={DRAGGING:0,DRAWING_POLYGON:1,DRAWING_LINE:2},this.mode=this.modes.DRAGGING,this.switchToDragging=function(){e.mode=e.modes.DRAGGING,e.polygonDrawer&&(e.polygonDrawer.disable(),e.polygonDrawer=undefined),e.lineDrawer&&(e.lineDrawer.disable(),e.lineDrawer=undefined),e.map.off(a.Draw.Event.CREATED),e.map.off(a.Draw.Event.DRAWSTOP)},this.handleDrawPolygon=function(t){e.map.addLayer(t.layer),e.options.onAddPolygon(t.layer),e.switchToDragging()},this.handleDrawLine=function(t){e.map.addLayer(t.layer),e.options.onAddLine(t.layer),e.switchToDragging()},this.stopEditLayer=function(){e.editingLayer&&(e.editingLayer.editing.disable(),e.editingLayer.off("edit")),e.map.off("click",e.stopEditLayer)}}return t.prototype.init=function(t){this.initialized=!0,this.map=a.map(t,{center:this.options.center,zoom:this.options.zoom,attributionControl:!1,zoomControl:!1,scrollWheelZoom:!1}),this.onInit.emit()},t.prototype.addTileLayer=function(t){var e=new a.TileLayer(t.url,t.options);return this.map.addLayer(e),e},t.prototype.addFeatureLayer=function(t){var e=new n.featureLayer(t);return this.map.addLayer(e),e},t.prototype.addGeoJSON=function(t,e){var o=a.geoJSON(t,e);return o.addTo(this.map),o},t.prototype.fitFeatureLayers=function(e){var o=this,n=a.latLngBounds([]),i=0;e.forEach(function(t){t.once("load",function(){i++,t.eachFeature(function(t){n.extend(t.getBounds())}),i===e.length&&n.isValid()&&o.map.fitBounds(n)})})},t.prototype.removeLayer=function(t){this.map.removeLayer(t)},t.prototype.toggleFullScreen=function(){var t=this;this.fullScreen=!this.fullScreen,setTimeout(function(){t.update()})},t.prototype.update=function(){this.initialized&&this.map.invalidateSize()},t.prototype.zoomIn=function(){this.initialized&&this.map.zoomIn()},t.prototype.zoomInDisabled=function(){return!this.initialized||this.map.getMaxZoom()<=this.map.getZoom()},t.prototype.zoomOut=function(){this.initialized&&this.map.zoomOut()},t.prototype.zoomOutDisabled=function(){return!this.initialized||this.map.getMinZoom()>=this.map.getZoom()},t.prototype.locate=function(){var e=this;!this.locating&&this.initialized&&(this.locating=!0,this.map.locate(),this.map.on("locationfound",function(t){e.locating=!1,e.map.setView(t.latlng,19),e.map.off("locationfound")}))},t.prototype.setView=function(t,e){this.initialized&&this.map.setView(t,e)},t.prototype.switchToPolygon=function(){this.switchToDragging(),this.mode=this.modes.DRAWING_POLYGON,this.polygonDrawer||(this.polygonDrawer=new a.Draw.Polygon(this.map,{shapeOptions:this.options.polygonColor?{color:this.options.polygonColor}:{}}),this.polygonDrawer.enable(),this.map.on(a.Draw.Event.CREATED,this.handleDrawPolygon),this.map.on(a.Draw.Event.DRAWSTOP,this.switchToDragging))},t.prototype.switchToLine=function(){this.switchToDragging(),this.mode=this.modes.DRAWING_LINE,this.lineDrawer||(this.lineDrawer=new a.Draw.Polyline(this.map,{shapeOptions:this.options.lineColor?{color:this.options.lineColor}:{}}),this.lineDrawer.enable(),this.map.on(a.Draw.Event.CREATED,this.handleDrawLine),this.map.on(a.Draw.Event.DRAWSTOP,this.switchToDragging))},t.prototype.startEditLayer=function(t){var e=this;this.stopEditLayer(),this.editingLayer=t,this.editingLayer.options.editing=this.editingLayer.options.editing||(this.editingLayer.options.editing={}),this.editingLayer.editing.enable(),this.map.on("click",this.stopEditLayer),this.editingLayer.on("edit",function(){e.editingLayer.feature=e.editingLayer.toGeoJSON(),e.options.onEditFeature(e.editingLayer.toGeoJSON())})},t.prototype.addMarker=function(t,e){return a.marker(t,e).addTo(this.map)},t.prototype.addHtmlMarker=function(t,e){var o=a.divIcon({html:e,className:"aui-leaflet__html-icon"});return a.marker(t,{icon:o}).addTo(this.map)},t}(),c=function(){function t(){}return t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet-control",template:'<button class="aui-leaflet__control a-button a-button--small has-icon" [disabled]="disabled">\n\t<i [class]="\'fa fa-\' + icon"></i>\n</button>\n'}]}],t.propDecorators={icon:[{type:o.Input}],disabled:[{type:o.Input}]},t}(),p=function(){function t(){}return t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet-drag-control",template:'<aui-leaflet-control (click)="map?.switchToDragging()" icon="hand-paper-o"></aui-leaflet-control>\n'}]}],t}(),u=function(){function t(){}return t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet-draw-control",template:'<div auiFlyout>\n\t<button auiFlyoutAction class="a-button a-button--small has-icon">\n\t\t<i class="fa fa-pencil"></i>\n\t</button>\n\t<div auiFlyoutZone>\n\t\t<ul class="m-selectable-list m-selectable-list--no-border">\n\t\t\t<li auiFlyoutClose><a (click)="map?.switchToPolygon()" class="m-selectable-list__item">Vorm intekenen</a></li>\n\t\t\t<li auiFlyoutClose><a (click)="map?.switchToLine()" class="m-selectable-list__item">Lijn/route intekenen</a></li>\n\t\t</ul>\n\t</div>\n</div>\n'}]}],t}(),f=function(){function t(){}return t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet-fullscreen-control",template:'<aui-leaflet-control (click)="map?.toggleFullScreen()" icon="arrows-alt"></aui-leaflet-control>\n'}]}],t}(),d=function(){function t(){}return t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet-locate-control",template:'<aui-leaflet-control icon="crosshairs" (click)="map?.locate()" [disabled]="map?.locating"></aui-leaflet-control>\n'}]}],t}(),m=function(){function t(){}return t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet-zoom-control",template:'<aui-leaflet-control\n\tclass="aui-leaflet__zoom-control"\n\ticon="plus" (click)="map?.zoomIn()"\n\t[disabled]="map?.zoomInDisabled()"></aui-leaflet-control>\n<aui-leaflet-control\n\tclass="aui-leaflet__zoom-control"\n\ticon="minus" (click)="map?.zoomOut()"\n\t[disabled]="map?.zoomOutDisabled()"></aui-leaflet-control>\n'}]}],t}(),h=function(){function t(){}return t.prototype.ngAfterViewInit=function(){var t=this;setTimeout(function(){t.leafletMap.init(t.map.nativeElement)})},t.prototype.ngAfterContentInit=function(){var e=this;[this.fullScreenControl,this.zoomControl,this.locateControl,this.dragControl,this.drawControl].forEach(function(t){return t?t.map=e.leafletMap:null})},t.decorators=[{type:o.Component,args:[{selector:"aui-leaflet",template:'<div class="aui-leaflet" [ngClass]="{\'is-full-screen\': leafletMap.fullScreen}">\n\t<div class="aui-leaflet__content" [ngClass]="{\'has-content\': hasSidebar}" #content>\n\t\t<ng-content></ng-content>\n\t</div>\n\t<div class="aui-leaflet__wrapper">\n\t\t<div #map class="aui-leaflet__map"></div>\n\t\t<div class="aui-leaflet__controls aui-leaflet__controls--top-left">\n\t\t\t<ng-content select="[controls][top][left]"></ng-content>\n\t\t</div>\n\t\t<div class="aui-leaflet__controls aui-leaflet__controls--top-right">\n\t\t\t<ng-content select="[controls][top][right]"></ng-content>\n\t\t</div>\n\t\t<div class="aui-leaflet__controls aui-leaflet__controls--bottom-right">\n\t\t\t<ng-content select="[controls][bottom][right]"></ng-content>\n\t\t</div>\n\t\t<div class="aui-leaflet__controls aui-leaflet__controls--bottom-left">\n\t\t\t<ng-content select="[controls][bottom][left]"></ng-content>\n\t\t</div>\n\t</div>\n</div>\n',styles:[".aui-leaflet{border:1px solid #b0b0b0;display:flex;height:600px;width:100%}.aui-leaflet__wrapper{flex:1;height:100%;overflow:hidden;position:relative}.aui-leaflet.is-full-screen{border:none;bottom:0;position:fixed;height:100%;left:0;right:0;top:0;z-index:10}.aui-leaflet__map{font-size:inherit;font-family:inherit;height:100%;position:relative;z-index:1}.aui-leaflet__content{background-color:#fff;overflow:auto;width:0}.aui-leaflet.is-full-screen .aui-leaflet__content{border:1px solid #b0b0b0;box-shadow:7px 7px 0 rgba(0,0,0,.1);position:absolute;left:20px;max-height:calc(100% - 160px);top:20px;width:350px;z-index:2}.aui-leaflet__content.has-content{border-right:1px solid #b0b0b0;padding:20px;width:300px}.aui-leaflet__controls{position:absolute;z-index:2}.aui-leaflet__controls--bottom-left{bottom:20px;left:20px}.aui-leaflet__controls--bottom-right{bottom:20px;right:20px}.aui-leaflet__controls--top-left{left:20px;top:20px}.aui-leaflet.is-full-screen .aui-leaflet__controls--top-left{left:390px}.aui-leaflet__controls--top-right{right:20px;top:20px}.aui-leaflet__control{float:left}.aui-leaflet__controls--top-left .aui-leaflet__control,.aui-leaflet__controls--top-right .aui-leaflet__control{margin-bottom:5px}.aui-leaflet__controls--bottom-left .aui-leaflet__control,.aui-leaflet__controls--bottom-right .aui-leaflet__control{margin-top:5px}.aui-leaflet__controls--bottom-left .aui-leaflet__control,.aui-leaflet__controls--top-left .aui-leaflet__control{margin-right:5px}.aui-leaflet__controls--bottom-right .aui-leaflet__control,.aui-leaflet__controls--top-right .aui-leaflet__control{margin-left:5px}.aui-leaflet__zoom-control{display:block}.aui-leaflet__html-icon{background-color:transparent;border:none}.leaflet-popup-content-wrapper{border:1px solid #f3f3f3!important;border-radius:0!important;box-shadow:.5rem .5rem 0 rgba(0,0,0,.1)!important;position:relative}.leaflet-popup-content-wrapper::after{content:'';position:absolute;bottom:-1px;height:1px;background-color:#fff;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:22px}.leaflet-popup-content{margin:10px!important;font-size:14px}.leaflet-container{font-family:inherit!important}.leaflet-popup-close-button{right:5px!important;top:5px!important;z-index:1}"],encapsulation:o.ViewEncapsulation.None}]}],t.propDecorators={map:[{type:o.ViewChild,args:["map"]}],content:[{type:o.ViewChild,args:["content"]}],fullScreenControl:[{type:o.ContentChild,args:[f]}],zoomControl:[{type:o.ContentChild,args:[m]}],locateControl:[{type:o.ContentChild,args:[d]}],dragControl:[{type:o.ContentChild,args:[p]}],drawControl:[{type:o.ContentChild,args:[u]}],leafletMap:[{type:o.Input}],hasSidebar:[{type:o.Input}]},t}();function g(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,a=o.call(t),l=[];try{for(;(void 0===e||0<e--)&&!(n=a.next()).done;)l.push(n.value)}catch(r){i={error:r}}finally{try{n&&!n.done&&(o=a["return"])&&o.call(a)}finally{if(i)throw i.error}}return l}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}var _=[c,p,u,f,d,m,h],b=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[l.CommonModule,i.FormsModule,i.ReactiveFormsModule,r.FlyoutModule],declarations:y(_),exports:y(_)}]}],t}();t.LeafletMap=s,t.LeafletControlComponent=c,t.LeafletDragControlComponent=p,t.LeafletDrawControlComponent=u,t.LeafletFullscreenControlComponent=f,t.LeafletLocateControlComponent=d,t.LeafletZoomControlComponent=m,t.LeafletComponent=h,t.baseMapAntwerp={name:"Base antwerp",url:"http://basemap.antwerpen.be/tile/{z}/{y}/{x}",options:{minZoom:13,maxNativeZoom:19,maxZoom:21}},t.baseMapWorldGray={name:"Base world gray",url:"http://{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{subdomains:["server","services"],maxNativeZoom:16}},t.LeafletModule=b,t.ɵa=_,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=map.umd.min.js.map