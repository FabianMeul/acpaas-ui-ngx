{"version":3,"sources":["null","ng://localstorage/lib/localstorage/localstorage.conf.ts","ng://localstorage/lib/localstorage/localstorage.helper.ts","ng://localstorage/lib/localstorage/localstorage.polyfill.ts","ng://localstorage/lib/localstorage/services/localstorage.service.ts","ng://localstorage/lib/localstorage/localstorage.module.ts","ng://localstorage/lib/localstorage/store/localstorage/localstorage.enhancer.ts","ng://localstorage/lib/localstorage/store/store.module.ts","ng://localstorage/lib/localstorage/localstorage.decorator.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","LOCALSTORAGE_CONFIG","InjectionToken","DEFAULT_LOCALSTORAGE_CONFIG","storageType","LocalstorageHelper","select","storage","selector","Array","isArray","this","verifyPath","keyMatches","key","keyMatchesSelector","keyInSelector","indexOf","data","curr","updateOrCreatePath","state","newValue","parseJSON","json","JSON","parse","e","console","warn","String","isEqual","Map","MemoryStorage","store","size","from","entries","reduce","acc","_a","index","keys","getItem","get","setItem","value","set","removeItem","delete","clear","memoryStorage","Proxy","target","name","receiver","Reflect","__proto__","ownKeys","getOwnPropertyDescriptor","enumerable","configurable","LocalstorageService","localstorageConfig","$window","instance","setStorage","validateStorage","_b","_c","identifier","verifyStorageType","stringify","updateSubscribers","args","_i","apply","comparator","getChildSubscription","distinctUntilChanged","addSubscriber","clearSubscribers","subscribers","forEach","subscriber","unsubscribe","getStorageSnapshot","tslib_1.__assign","prop","_this","has","BehaviorSubject","parentSubscription","map","nextValue","slice","bind","subscribe","next","undefined","defaultValue","Storage","Injectable","Inject","WINDOW","ɵ0","ɵ1","window","LocalstorageModule","localstorageService","forRoot","ngModule","providers","provide","useValue","NgModule","imports","LocalstorageReduxPlugin","ngRedux","enhancer","selectors","storedState","selectFromState","createStore","reducer","initialState","filter","first","subscribeSelector","selectorKey","join","stored","newValues","getState","storedData","pathSelector","NgRedux","LocalstorageStoreModule","NgReduxModule","bindingKey","lastIndexOf","substring","defineProperty"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}","import { InjectionToken } from '@angular/core';\nimport { LocalstorageConfig } from './types/localstorage.types';\n\nexport const LOCALSTORAGE_CONFIG: InjectionToken<LocalstorageConfig> = new InjectionToken<LocalstorageConfig>('localstorageConfig');\n\nexport const DEFAULT_LOCALSTORAGE_CONFIG: LocalstorageConfig = {\n\tstorageType: 'localStorage',\n};\n","import { isEqual } from 'lodash-es';\nimport { PathSelector, Selector } from './types/localstorage.types';\n\nexport class LocalstorageHelper {\n\tstatic comparator = isEqual;\n\n\t// select data from the storage for the provided selector\n\tstatic select(storage: any, selector: Selector): any {\n\t\tif (!storage) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!selector) {\n\t\t\treturn storage;\n\t\t}\n\n\t\tif (typeof selector === 'function') {\n\t\t\treturn selector(storage);\n\t\t}\n\n\t\tif (Array.isArray(selector)) {\n\t\t\treturn this.verifyPath(storage, selector);\n\t\t}\n\n\t\treturn this.verifyPath(storage, [selector]);\n\t}\n\n\t// verify the key matches with the selector\n\t// property selector: compare the key with the selector\n\t// path selector: verify the key is the last item in the path\n\t// function selector: always return true\n\tstatic keyMatches(key: string, selector: Selector): Boolean {\n\t\tconst keyMatchesSelector = key === selector;\n\t\tconst keyInSelector = Array.isArray(selector) ? selector.indexOf(key) >= 0 : false;\n\t\tconst selectorIsFunction = typeof selector === 'function';\n\n\t\treturn keyMatchesSelector || keyInSelector || selectorIsFunction;\n\t}\n\n\t// verify a path exists in an object\n\tstatic verifyPath(data?: any, selector?: PathSelector) {\n\t\tif (!data || !selector) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet curr = data;\n\n\t\tfor (let i = 0; i < selector.length; i += 1) {\n\t\t\tif (curr.hasOwnProperty(selector[i])) {\n\t\t\t\tcurr = curr[selector[i]];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn curr;\n\t}\n\n\tstatic updateOrCreatePath(state?: any, selector?: PathSelector, newValue?: any) {\n\t\tif (!state || !selector) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet curr = state;\n\t\tlet i = 0;\n\n\t\tfor (i = 0; i < selector.length; i += 1) {\n\t\t\tif (!curr.hasOwnProperty(selector[i])) {\n\t\t\t\tcurr[selector[i]] = {};\n\t\t\t}\n\n\t\t\tif (i === selector.length - 1) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcurr = curr[selector[i]];\n\t\t}\n\n\t\tcurr[selector[i]] = newValue;\n\n\t\treturn state;\n\t}\n\n\tstatic parseJSON(key: string, json: string): any {\n\t\ttry {\n\t\t\treturn JSON.parse(json);\n\t\t} catch (e) {\n\t\t\tconsole.warn(`Parsing key \"${key}\" in localstorage failed, ignoring value.`); // tslint:disable-line:no-console\n\t\t\treturn String(json);\n\t\t}\n\t}\n}\n","export class MemoryStorage {\n\tpublic get length(): number {\n\t\treturn this.store.size;\n\t}\n\n\tpublic get storage(): any {\n\t\treturn Array.from(this.store.entries()).reduce((acc, curr: [string, any]) => ({\n\t\t\t...acc,\n\t\t\t[curr[0]]: curr[1],\n\t\t}), {});\n\t}\n\n\tprivate store = new Map();\n\n\tpublic key(index: number): any {\n\t\treturn Array.from(this.store.keys())[index];\n\t}\n\n\tpublic getItem(key: string): any {\n\t\treturn this.store.get(key);\n\t}\n\n\tpublic setItem(key: string, value: any): void {\n\t\tthis.store.set(key, value);\n\t}\n\n\tpublic removeItem(key: string): void {\n\t\tthis.store.delete(key);\n\t}\n\n\tpublic clear(): void {\n\t\tthis.store.clear();\n\t}\n}\n\nconst storage = new MemoryStorage();\n\nexport default new Proxy(storage, {\n\tget: function (target: any, name, receiver) {\n\t\tif (name in target) {\n\t\t\treturn Reflect.get(target, name, receiver);\n\t\t}\n\n\t\tif (name in target.__proto__) {\n\t\t\treturn target.__proto__[name];\n\t\t}\n\n\t\tif (target.storage) {\n\t\t\treturn target.getItem(name);\n\t\t}\n\t},\n\townKeys: function (target: any) {\n\t\treturn Object.keys(target.storage); // return stored keys when storage keys are requested\n\t},\n\tgetOwnPropertyDescriptor() {\n\t\treturn {\n\t\t\tenumerable: true, // ensure stored keys kan be iterated\n\t\t\tconfigurable: true,\n\t\t};\n\t},\n});\n","import { Inject, Injectable } from '@angular/core';\nimport { WINDOW } from '@acpaas-ui/ngx-components/utils';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport 'rxjs/add/operator/distinctUntilChanged';\nimport 'rxjs/add/operator/map';\n\nimport { LOCALSTORAGE_CONFIG, DEFAULT_LOCALSTORAGE_CONFIG } from '../localstorage.conf';\nimport { Selector, PathSelector, Comparator, LocalstorageConfig } from '../types/localstorage.types';\nimport { LocalstorageHelper } from '../localstorage.helper';\nimport memoryStorage from '../localstorage.polyfill';\n\n\n// @dynamic\n@Injectable()\nexport class LocalstorageService {\n\tpublic static instance: LocalstorageService;\n\n\tpublic get instance(): LocalstorageService {\n\t\treturn LocalstorageService.instance;\n\t}\n\n\tpublic set instance(instance: LocalstorageService) {\n\t\tif (LocalstorageService.instance) {\n\t\t\treturn;\n\t\t}\n\n\t\tLocalstorageService.instance = instance;\n\t}\n\n\tpublic storageType: string;\n\tpublic identifier: string;\n\tprivate storage: Storage;\n\tprivate subscribers: Map<Selector, BehaviorSubject<any>> = new Map<Selector, BehaviorSubject<any>>();\n\n\tconstructor(\n\t\t@Inject(LOCALSTORAGE_CONFIG) private localstorageConfig,\n\t\t@Inject(WINDOW) private $window\n\t) {\n\t\t// store a reference to the instance on the service so the decorator has access to instance methods\n\t\tthis.instance = this;\n\n\t\tthis.setStorage(localstorageConfig);\n\t\tthis.validateStorage();\n\t}\n\n\tpublic setStorage({\n\t\tstorageType,\n\t\tidentifier = '',\n\t}: LocalstorageConfig = {}): void {\n\t\tthis.storageType = this.verifyStorageType(storageType, 'localStorage');\n\t\tthis.storage = this.storageType === 'memory' ? memoryStorage : this.$window[this.storageType];\n\n\t\tthis.identifier = identifier;\n\t}\n\n\t/**\n\t * Browser Storage api\n\t */\n\tpublic setItem(key: string, value: any): void {\n\t\tthis.storage.setItem(key, JSON.stringify(value));\n\t\tthis.updateSubscribers(key);\n\t}\n\n\tpublic getItem<T = any>(key: string): T {\n\t\treturn LocalstorageHelper.parseJSON(key, this.storage.getItem(key));\n\t}\n\n\tpublic removeItem(key: string): void {\n\t\tthis.storage.removeItem(key);\n\t\tthis.updateSubscribers(key);\n\t}\n\n\tpublic clear(...args): void {\n\t\tthis.storage.clear.apply(this.storage, args);\n\t\tthis.updateSubscribers();\n\t}\n\n\t/**\n\t * Decorator api\n\t */\n\tpublic select<T = any>(selector: Selector, comparator: Comparator = LocalstorageHelper.comparator): BehaviorSubject<T> {\n\t\t// if the selector is an array, add a subscription for the last item\n\t\tif (Array.isArray(selector)) {\n\t\t\treturn (this\n\t\t\t\t.getChildSubscription(selector, this.select(selector[0]))\n\t\t\t\t.distinctUntilChanged(comparator) as any) as BehaviorSubject<T>; // make sure it is only triggered when the value changes\n\t\t}\n\n\t\treturn this\n\t\t\t.addSubscriber<T>(selector)\n\t\t\t.distinctUntilChanged<T>(comparator) as BehaviorSubject<T>;\n\t}\n\n\tpublic clearSubscribers(): void {\n\t\tthis.subscribers.forEach(subscriber => {\n\t\t\tsubscriber.unsubscribe();\n\t\t});\n\t}\n\n\t// get a clone of the current stored values\n\tpublic getStorageSnapshot<T = any>(): T {\n\t\tif (this.storageType === 'memory') {\n\t\t\treturn {} as T;\n\t\t}\n\n\t\treturn {...Object.keys(this.storage).reduce((acc, prop) => {\n\t\t\tacc[prop] = LocalstorageHelper.parseJSON(prop, this.storage[prop]);\n\t\t\treturn acc;\n\t\t}, {})} as T;\n\t}\n\n\t// return or create a behaviorsubject from the selected value\n\tpublic addSubscriber<T = any>(selector: Selector): BehaviorSubject<T> {\n\t\tif (!this.subscribers.has(selector)) {\n\t\t\tthis.subscribers.set(selector, new BehaviorSubject<T>(LocalstorageHelper.select(this.getStorageSnapshot(), selector)));\n\t\t}\n\n\t\treturn this.subscribers.get(selector);\n\t}\n\n\tprivate validateStorage(): void {\n\t\tconst storage = this.getStorageSnapshot();\n\n\t\tif (!this.identifier && !storage['aui-storage']) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.identifier === storage['aui-storage']) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clear();\n\n\t\tif (this.identifier) {\n\t\t\tthis.setItem('aui-storage', this.identifier);\n\t\t}\n\t}\n\n\t// fetch or create a subscription for the parent\n\t// subscribe to said subscription and return a new subscriber from the value\n\tprivate getChildSubscription<T = any>(selector: PathSelector, parentSubscription: BehaviorSubject<any>): BehaviorSubject<T> {\n\t\tconst subscriber = this.addSubscriber<T>(selector);\n\n\t\tparentSubscription\n\t\t\t.map((nextValue => {\n\t\t\t\treturn LocalstorageHelper.verifyPath(nextValue, selector.slice(1)); // filter out the selected path value\n\t\t\t}).bind(this))\n\t\t\t.subscribe((nextValue: T) => {\n\t\t\t\tsubscriber.next(nextValue);\n\t\t\t});\n\n\t\treturn subscriber;\n\t}\n\n\t// update all subscribers\n\t// if a key is provided, matching will prevent useless updates\n\tprivate updateSubscribers(key?: string): void {\n\t\tconst storage = this.getStorageSnapshot();\n\t\tthis.subscribers.forEach((subscriber: BehaviorSubject<any>, selector: Selector) => {\n\t\t\tif (key !== undefined && !LocalstorageHelper.keyMatches(key, selector)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsubscriber.next(LocalstorageHelper.select(storage, selector));\n\t\t});\n\t}\n\n\t// verify the prefered storagetype exists, fall back to \"localStorageâ or memory\n\tprivate verifyStorageType(storageType?: string, defaultValue: string = 'memory'): string {\n\t\tconst storageTypeExists = this.$window.hasOwnProperty(storageType) && this.$window[storageType] instanceof this.$window.Storage;\n\n\t\tif (storageTypeExists) {\n\t\t\treturn storageType;\n\t\t}\n\n\t\t// if storage type does not exist, verify defaultValue until found or memory was set as default\n\t\treturn storageType === 'memory' ? 'memory' : this.verifyStorageType(defaultValue);\n\t}\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { WINDOW } from '@acpaas-ui/ngx-components/utils';\n\nimport {\n\tLocalstorageConfig,\n} from './types/localstorage.types';\nimport {\n\tLocalstorageService,\n} from './services/localstorage.service';\nimport {\n\tLOCALSTORAGE_CONFIG,\n\tDEFAULT_LOCALSTORAGE_CONFIG,\n} from './localstorage.conf';\n\n@NgModule({\n\timports: [\n\t],\n\tproviders: [\n\t\t{ provide: LOCALSTORAGE_CONFIG, useValue: DEFAULT_LOCALSTORAGE_CONFIG },\n\t\t{ provide: WINDOW, useValue: window },\n\t\tLocalstorageService,\n\t],\n})\nexport class LocalstorageModule {\n\tstatic forRoot(\n\t\tlocalstorageConfig: LocalstorageConfig = DEFAULT_LOCALSTORAGE_CONFIG\n\t): ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: LocalstorageModule,\n\t\t\tproviders: [\n\t\t\t\t{ provide: LOCALSTORAGE_CONFIG, useValue: localstorageConfig },\n\t\t\t\t{ provide: WINDOW, useValue: window },\n\t\t\t\tLocalstorageService,\n\t\t\t],\n\t\t};\n\t}\n\n\tconstructor(\n\t\tprivate localstorageService: LocalstorageService\n\t) {}\n}\n","import { Reducer, StoreCreator, StoreEnhancer, Store, StoreEnhancerStoreCreator } from 'redux';\nimport { NgRedux } from '@angular-redux/store';\nimport { Injectable } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/first';\n\nimport { isEqual } from 'lodash-es';\n\nimport { LocalstorageHelper } from '../../localstorage.helper';\nimport { LocalstorageService } from '../../services/localstorage.service';\nimport { PropertySelector, PathSelector } from '../../types/localstorage.types';\n\n@Injectable()\nexport class LocalstorageReduxPlugin {\n\tprivate storeSubscription: Subscription;\n\tprivate subscribers: Map<PropertySelector|PathSelector, Subscription> = new Map<PropertySelector|PathSelector, Subscription>();\n\n\tconstructor(\n\t\tprivate ngRedux: NgRedux<any>,\n\t\tprivate localstorageService: LocalstorageService\n\t) {}\n\n\tenhancer<T = any>(selectors?: Array<PropertySelector|PathSelector>): StoreEnhancer<T> {\n\t\tconst storedState = this.selectFromState(selectors);\n\n\t\tthis.subscribe(selectors);\n\n\t\treturn (createStore: StoreEnhancerStoreCreator<T>): StoreEnhancerStoreCreator<T> => (\n\t\t\treducer: Reducer<T>,\n\t\t\tinitialState: any\n\t\t): Store<T> => {\n\t\t\treturn createStore(reducer, {\n\t\t\t\t...initialState,\n\t\t\t\t...storedState,\n\t\t\t});\n\t\t};\n\t}\n\n\tsubscribe(selectors?: Array<PropertySelector | PathSelector>): void {\n\t\tthis.ngRedux.select()\n\t\t\t.filter(store => !!store)\n\t\t\t.first()\n\t\t\t.subscribe(store => {\n\t\t\t\tif (!selectors) {\n\t\t\t\t\tthis.subscribeSelector('reduxState');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselectors.forEach(selector => this.subscribeSelector(selector));\n\t\t\t});\n\t}\n\n\tprivate subscribeSelector(selector: PropertySelector | PathSelector): void {\n\t\tif (!selector) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscriber = this.subscribers.get(selector);\n\n\t\tif (subscriber) {\n\t\t\tsubscriber.unsubscribe();\n\t\t}\n\n\t\tthis.subscribers.set(selector, this.ngRedux.subscribe(() => {\n\t\t\tconst selectorKey = Array.isArray(selector) ? selector.join('.') : String(selector);\n\t\t\tconst stored = this.localstorageService.getItem(selectorKey);\n\t\t\tconst newValues = selector === 'reduxState' ? this.ngRedux.getState() :\n\t\t\t\tLocalstorageHelper.select(this.ngRedux.getState(), selector);\n\n\t\t\tif (isEqual(stored, newValues)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.localstorageService.setItem(selectorKey, newValues);\n\t\t}) as any);\n\t}\n\n\tprivate selectFromState(selectors?: Array<PropertySelector|PathSelector>): any {\n\t\tif (!selectors || !selectors.length) {\n\t\t\treturn this.localstorageService.getItem('reduxState');\n\t\t}\n\n\t\treturn selectors.reduce((acc, selector) => {\n\t\t\tconst storedData = LocalstorageHelper.select(this.localstorageService.getStorageSnapshot(), selector);\n\t\t\tconst pathSelector = Array.isArray(selector) ? selector : [selector];\n\n\t\t\tLocalstorageHelper.updateOrCreatePath(acc, pathSelector, storedData);\n\n\t\t\treturn acc;\n\t\t}, {});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { NgReduxModule } from '@angular-redux/store';\nimport { LocalstorageReduxPlugin } from './localstorage/localstorage.enhancer';\n\n@NgModule({\n\timports: [ NgReduxModule ],\n\tproviders: [ LocalstorageReduxPlugin ],\n})\nexport class LocalstorageStoreModule {}\n","import { Selector, Comparator, PropertyDecorator } from './types/localstorage.types';\nimport { LocalstorageService } from './services/localstorage.service';\n\nexport function storage(selector?: Selector, comparator?: Comparator): PropertyDecorator {\n\n\treturn function decorate(target: any, key: string): void {\n\t\tlet bindingKey = selector;\n\t\tif (!selector) {\n\t\t\tbindingKey = (key.lastIndexOf('$') === key.length - 1) ? key.substring(0, key.length - 1) : key;\n\t\t}\n\n\t\tfunction getter() {\n\t\t\treturn LocalstorageService.instance.select(bindingKey, comparator);\n\t\t}\n\n\t\t// Replace decorated property with a getter that returns the observable.\n\t\tdelete target[key];\n\n\t\tObject.defineProperty(target, key, {\n\t\t\tget: getter,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t});\n\t};\n}\n"]}